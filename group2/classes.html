<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap 101 Template</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
    <title>Title</title>
    <style>
            *{
                margin: 0;
                padding: 0;
             }
              .headClass{
                  width: 100%;
                height: 100px;
                display: flex;
                justify-content: space-between;
                align-items:center;
                /*border: 1px solid;*/

              }
              .createClass{
                  background-color: rgba(254, 67, 101, 0.71);
                  width: 92px;
                  height: 35px;
                  color: white;
                  line-height: 35px;
                  text-align: center;
                  border-radius: 5px;
                  margin-left: 110px;
                  border: 1px solid;
              }
            .createClass:hover{
                cursor: pointer;
            }
              .search{
                    width: 300px;
                    height: 30px;
                    display: flex;
                }
              .input{
                    border: 1px solid;
                    width: 200px;
                    height: 30px;
                    line-height: 30px;
                    border-radius: 5px;
                    margin-right: 20px;
                  text-align: center;
                }
             .searchBtn{
                 width: 50px;
                 height: 30px;
                 line-height: 30px;
                 border-radius: 5px;
                 text-align: center;
                 border: 1px solid;
                }
            table{
                width: 100%;
                border: 0;
                border-collapse:collapse;
            }
            table th{
                width: 20%;
                text-align: center;
            }

            table tr{
                height: 60px;
                border-bottom: 1px solid #d1d1d1;
            }

            table td{
               text-align: center;
            }
            .btnFenbu{
                display: flex;
                justify-content: center;
                align-items:center;

            }
            .btnFenbu>div{
                width: 50px;
                height:30px;
                line-height: 30px;
                margin: 13px 15px;
                border-radius: 5px;
                /*border: 1px solid;*/
                color: white;
            }
            .backC{
                background-color: #fff1f1;
            }
            .btn1{
                background-color: rgb(200,200,169);
            }
            .btn2{
                background-color: #fe96a9;
            }
            .btn3{
                background-color: rgb(249,205,173);
            }
        .yema{
            width: 95%;
            height: 50px;
            line-height: 50px;
            text-align: right;

        }
        #num{
            width: 35px;
        }

        /**/
        #myModalLabel,.modal-title{
            position: absolute;
            left: 20px;
            top: 20px;
            font-weight: bolder;
        }
        .modal-header{
          background-color: rgb(252,157,154);
        }
        .btn-default{
            background-color: rgb(222,119,114)!important;
            color: white!important;
            border: none;
        }
        .btn-primary {
           background-color: rgb(102,153,102)!important;
        }
        #physical,#shiti{
            margin-left: 70px;
        }
        .classTime{
            margin-top: 30px;
        }
        .Teacher{
            margin: 20px auto;
            font-weight: 100;
        }
        .huan{
            width: 66px;
        }
        .star,.cueWrong, .lose,.cueWrong1{
            color: red;
        }
        .aaa{
            margin-top: 200px;
        }
        .edictName,#edictYear,.huang,.banji,#year{
            margin-left: 10px;
        }

    </style>
</head>
<body>
<div class="headClass">
    <div class="createClass" data-toggle="modal" data-target="#addModal" onclick="createData();"><i class="fa fa-plus" aria-hidden="true"></i>创建班级</div>
    <div class="search">
        <input class="input" placeholder="输入班级名称/老师/班级类别">
        <div class="searchBtn" onclick='search();'>查询</div>
    </div>
</div>
<table class="col-lg-12">
    <thead>
    <tr class="backC">
    <th class="col-lg-1">班级编号</th>
    <th>班级名称</th>
    <th>班级时间</th>
    <th>主班老师</th>
    <th>班级类别</th>
    <th class="col-lg-3">班级人数</th>
    <th>操作</th>
    </tr>
    </thead>
    <tbody class="tableTr"></tbody>

</table>
<div class="yema">

        <span class="aaa">第</span>
        <select name="" id="num" class="aaa">
            <option value="1">1</option>
            <option >2</option>
        </select>
        <span class="aaa">页</span>
        <span class="aaa">共2页</span>
        <span class="aaa"> << </span>
        <span class="aaa">  >> </span>

</div>

                       <!-- Modal -->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">添加班级</h4>
            </div>
            <div class="modal-body">
                <div class="className">
               <p>班级名称 <input class="banji" type="text" placeholder="请输入20个字符的名称！" > <span class="cueWrong1"></span></p>
                <select id="shiti">
                    <option>实体班</option>
                    <option>预科班</option>
                </select>
                <select name="" id="small">
                    <option>小班</option>
                    <option>中班</option>
                    <option>大班</option>
                </select>
                </div>
                <hr>
                <div class="classTime">班级时间
                    <select name="" id="year">
                        <option selected="selected">2018年</option>
                        <option >2019年</option>
                        <option>2020年</option>
                    </select>
                    至
                    <select name="" id="xYear">
                        <option>2019年</option>
                        <option>2020年</option>
                        <option>2021年</option>
                    </select>
                                                                                                                                                                              </div>
                <div class="Teacher">
                <span>主班老师 <span class="star">*</span></span>
                <select  id="seconTeacher">
                    <option></option>
                    <option>王晓晨</option>
                    <option>水原</option>
                    <option>檀健次</option>
                    <option>青丝草</option>

                </select>
                    <!--班主任名字为空时的提示-->
                    <span class="cueWrong"></span>
                </div>
                <div class="Teacher">
                    <span>副班老师</span>
                    <select class="huang">
                        <option></option>
                        <option>黄轩</option>
                        <option>黄轩悬</option>
                    </select>
                </div>


            <div class="modal-footer">
                <div class="btn btn-default cancel" data-dismiss="modal">取消</div>
                <div class="btn btn-primary" id="addSubmit" data-dismiss="modal">提交</div>
            </div>
        </div>
    </div>
</div>
</div>

                 <!--编辑的模态框-->
<div class="modal fade" id="edictModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">编辑班级</h4>
            </div>
            <div class="modal-body">
                <div class="className">
                    <p>班级名称 <input class="edictName" type="text" placeholder="请输入20个字符的名称！" > <span class="cueWrong1"></span></p>
                    <select  id="physical">
                        <option>实体班</option>
                        <option>预科班</option>
                    </select>
                    <select name="" >
                        <option>小班</option>
                        <option>中班</option>
                        <option>大班</option>
                    </select>
                </div>
                <hr>
                <div class="classTime">班级时间
                    <select name="" id="edictYear">
                        <option selected="selected">2018年</option>
                        <option>2019年</option>
                        <option>2020年</option>
                    </select>
                    至
                    <select name="" id="edictYear1">
                        <option>2019年</option>
                        <option>2020年</option>
                        <option>2021年</option>
                    </select>
                </div>
                <div class="Teacher">
                    <span>主班老师 <span class="star">*</span></span>
                    <select id="firstTeacher">
                        <option></option>
                        <option>王晓晨</option>
                        <option>水原</option>
                        <option>檀健次</option>
                        <option>青丝草</option>
                    </select>
                    <!--班主任名字为空时的提示-->
                    <span class="cueWrong"></span>
                </div>
                <div class="Teacher">
                    <span>副班老师</span>
                    <select class="huang">
                        <option></option>
                        <option>黄轩</option>
                        <option>青丝草</option>
                    </select>
                </div>


                <div class="modal-footer">
                    <div class="btn btn-default cancel" data-dismiss="modal">取消</div>
                    <div class="btn btn-primary" id="edictSubmit" onclick="edictSubmit()" data-target="#cue" data-toggle="modal">提交</div>
                </div>
            </div>
        </div>
    </div>
</div>
                     <!--提示框的-->
<div class="modal fade" id="cue" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">提示信息</h4>
            </div>
            <div class="modal-body">
                <p class="lose1"></p>
                <p class="lose1"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" id="close">取消</button>
                <button type="button" class="btn btn-primary" id="sure" data-dismiss="modal">确定</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
                  <!--查看的模态框-->
<!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Large modal</button>-->

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content chakan">
            <table class="col-lg-12">
                <thead>
                <tr class="backC">
                    <th>姓名</th>
                    <th>年龄</th>
                    <th>家长姓名</th>
                    <th>电话</th>
                    <th>住址</th>
                </tr>
                </thead>
                <tbody></tbody>

            </table>
        </div>
    </div>
</div>

<script src="dist/js/jquery-3.3.1.js"></script>
<script src="dist/js/bootstrap.min.js"></script>


<script>
    var flag;
    var v;
    var studentClass=[
        {className:"小星星1班",classTime:'2018年-2019年',classTeacher:"檀健次",classType:"实体班",classPerson:15},
        {className:"小星星2班",classTime:'2018年-2019年',classTeacher:"张恒",classType:"预科班",classPerson:17},
        {className:"小月亮1班",classTime:'2018年-2019年',classTeacher:"廖思",classType:"实体班",classPerson:20},
        {className:"小太阳1班",classTime:'2018年-2019年',classTeacher:"青丝草",classType:"预科班",classPerson:23},
        {className:"小太阳2班",classTime:'2018年-2019年',classTeacher:"花泽类",classType:"实体班",classPerson:28}
    ];

    //将表格数据渲染到页面
    window.onload=showData;
        function showData() {
            var mytable=$(".col-lg-12 tbody").get(0);
            mytable.innerHTML='';
            for(var i=0;i<studentClass.length;i++){
                mytable.innerHTML+="<tr>"+
                        "<td >"+(i+1)+"</td>"+
                        "<td class='classCha'>"+studentClass[i].className+"</td>"+
                        "<td>"+studentClass[i].classTime+"</td>"+
                        "<td class='classCha1'>"+studentClass[i].classTeacher+"</td>"+
                        "<td class='classCha2'>"+studentClass[i].classType+"</td>"+
                        "<td>"+studentClass[i].classPerson+"</td>"+
                        "<td class='btnFenbu'><div class='btn1' onclick='edict("+i+");' data-toggle='modal' data-target='#edictModal'>编辑</div><div class='btn2' onclick='deleteData("+i+")'>删除</div><div class='btn3' data-toggle='modal' data-target='.bs-example-modal-lg' onclick='check("+i+");'>详情</div></td>"+
                        "</tr>"
            }
        }
          var lose=document.getElementsByClassName("lose");


       //删除数据
        function deleteData(num) {
            console.log(studentClass[num].classPerson);
            if(studentClass[num].classPerson!="0") {
                lose1[0].innerText="删除失败";
                lose1[1].innerText="班级下还有人员不能删除";
                $('#cue').modal('show');  //提示模态框出现
                $("#sure").click(function () {
                    $('#cue').modal('hide');   //点击确定模态框消失
                })
            }else {
                lose1[0].innerText="";
                lose1[1].innerText="是否确定删除？";
                $('#cue').modal('show');  //提示模态框出现
                $("#sure").click(function () {
                    $('#cue').modal('hide');   //点击确定模态框消失
                    studentClass.splice(num,1);
                    showData();
                })
            }
        }

        //编辑数据
             var num1=0;
             var lose1=document.getElementsByClassName("lose1");
             var v1;
             var t1;
             var t2;
             var teacher;
             var type;
             var flag1;
             function edict(num) {
                 num1=num;
                 $('.edictName').val(studentClass[num1].className);   //将班级名称、班级时间放进去
                 $("#firstTeacher  option:selected").text(studentClass[num1].classTeacher);
             }
             function edictSubmit() {
                 flag1=0;
                 v1=$('.edictName').val();
                 t1=$("#edictYear  option:selected").text();
                 t2=$("#edictYear1  option:selected").text();
                 teacher=$("#firstTeacher  option:selected").text();
                 type=$("#physical  option:selected").text();
                 console.log(teacher);
                 console.log(type);
                 console.log(studentClass[num1].classTeacher);
                 console.log(studentClass[num1].classType);
                     for(var j=0;j<studentClass.length;j++) {         //如果编辑的班级名称与其他存在班级名称相同的判断
                         //console.log(v1)
                         console.log(studentClass[j].className);
                         if (v1 === studentClass[j].className&&j!=num1) {
                             flag1=1;
                         }
                     }
                if(flag1==1){
                    lose1[0].innerText = ",保存失败";
                    lose1[1].innerText = "部门已经存在,请重新命名！";
                    $("#edictSubmit").attr({
                        "data-target": "#cue",
                        "data-toggle": "modal"
                    });
                    $("#edictSubmit").attr({
                        "data-dismiss": "modal"
                    });
                }else if(v1===studentClass[num1].className&&t1+"-"+t2===studentClass[num1].classTime&&teacher===studentClass[num1].classTeacher&&type===studentClass[num1].classType){
                     console.log("进相等");
                     lose1[0].innerText="";
                     lose1[1].innerText="内容没有修改,保存失败";
                     $("#edictSubmit").attr({
                         "data-target":"#cue",
                         "data-toggle":"modal"
                     });
                     $("#edictSubmit").attr({
                         "data-dismiss":"modal"
                     });
                 }else{
                     console.log("进不相等")
                     v1=$('.edictName').val();
                     studentClass[num1].className=v1;
                     studentClass[num1].classTime=t1+"-"+t2;
                     studentClass[num1].classTeacher=teacher;
                     studentClass[num1].classType=type;
                     $("#edictSubmit").attr({
                         "data-target":"",
                         "data-toggle":""
                     });
                     $("#edictSubmit").attr({
                         "data-dismiss":"modal"
                     });
                      showData();
                 }
             }


        function createData(){
            $(".banji").val("");
            $('#seconTeacher option:first').prop("selected","selected");
            //打开模态框，把模态框内容清空

        }

        //创建班级
       var cueWrong=document.getElementsByClassName("cueWrong")[0];
       var cueWrong1=document.getElementsByClassName("cueWrong1")[0];
       var seconTeacher=document.getElementById("seconTeacher");
       var className=document.getElementsByClassName("className")[0];


       $("#addSubmit").click(function () {
           flag=false;
           repeat();
           if (flag) {
               lose1[0].innerText = "";
               lose1[1].innerText = "班级已经存在，请重新输入";
               console.log("flag");
               $("#addModal").modal('hide');
               $("#addSubmit").attr({
                   "data-target": "#cue",
                   "data-toggle": "modal"
               });
           } else {
               console.log("kk");
               $("#addSubmit").attr({
                   "data-toggle": "",
                   "data-target": ""
               });
               addClass();

           }

       });
        function addClass() {
            var year=document.getElementById("year");
            var xYear=document.getElementById("xYear");
            var xClass=document.getElementById("physical");
            xClassValue=xClass.options[xClass.selectedIndex].value;
            yearValue=year.options[year.selectedIndex].value;
            xYearValue=xYear.options[xYear.selectedIndex].value;
            seconTeacherValue=seconTeacher.options[seconTeacher.selectedIndex].value;

            //创建对象

            var obj={className:v,classTime:yearValue+"-"+xYearValue,classTeacher:seconTeacherValue,classType:xClassValue,classPerson:0};
          //  console.log('11')
            var reg=/[^~!@#$%^&*(),./'";+=-]{2,19}/;
            var result=reg.test(v);
           // console.log(result);
            if(result==false){
                cueWrong1.innerText="格式错误";
                $("#addSubmit").attr({
                    "data-dismiss":""
                });
                $('#addModal').on('hidden.bs.modal',function () {
                    $(".banji").val("");
                    cueWrong1.innerText="";
                })
            }
            else if(v===''){
//                alert("班级名称不能为空")
                lose[0].innerText="添加失败";
                lose[1].innerText="班级名称不能为空";

                $("#addModal").modal('hide');
                $('#cue').modal('show');
                $("#addSubmit").attr({
                    "data-dismiss":""
                });
                $("#sure").attr({
                    "data-dismiss":"modal"
                });
            }else if(seconTeacherValue===''){
                cueWrong.innerText="主班老师不能为空";
                //console.log("qqq")
                $("#addSubmit").attr({
                    "data-dismiss":""
                });
            }else{
                studentClass.push(obj);
                $("#addSubmit").attr({
                    "data-dismiss":"modal"

                });
                $('#cue').modal('hide');//点击确定模态框消失
                $(".banji").val("");
                cueWrong.innerText="";
                $('.seconTeacher option:selected').val("");

                showData();
            }

            className.getElementsByTagName("input")[0].value="";
            xYear.options[year.selectedIndex].value="";
            $(".banji").val("");

            }

          // 取消就是重置的功能
             $(".cancel").click(function () {
                 className.getElementsByTagName("input")[0].value="";
                 firstTeacher.options[firstTeacher.selectedIndex].value="";
                  cueWrong.innerText="";
                 cueWrong1.innerText=""
             });

         //判断是否创建了班级名称相同的班级
          function repeat() {
              v=$(".banji").val();
              console.log(v);

            for(var i=0;i<studentClass.length;i++){
                    if(v===studentClass[i].className){
                        console.log(studentClass[i].className);
                        flag=true;
                    }
                    console.log(studentClass[i].className)
                }

              }
         // 查看详情

            var studentInf=[
                {Name:"嗯哼",age:'3岁',parent:"杜江",tel:"135****2007",address:"北京市"},
                {Name:"Jasper",age:'3岁',parent:"陈小春",tel:"135****2007",address:"北京市"},
                {Name:"轩轩",age:'3岁',parent:"邹市明",tel:"135****2007",address:"北京市"},
                {Name:"奥利",age:'3岁',parent:"李小鹏",tel:"135****2007",address:"北京市"},
                {Name:"neinei",age:'3岁',parent:"吴尊",tel:"135****2007",address:"北京市"}
            ];
            var studentInfo=[
                {Name:"石头",age:'4岁',parent:"杜涛",tel:"135****2007",address:"北京市"},
                {Name:"王诗龄",age:'4岁',parent:"李湘",tel:"135****2007",address:"北京市"},
                {Name:"森碟",age:'4岁',parent:"田亮",tel:"135****2007",address:"北京市"},
                {Name:"咘咘",age:'4岁',parent:"贾静雯",tel:"135****2007",address:"北京市"},
                {Name:"max",age:'4岁',parent:"吴尊",tel:"135****2007",address:"北京市"}
            ];
            var studentInfor=[
                {Name:"天天",age:'3岁',parent:"张亮",tel:"135****2007",address:"北京市"},
                {Name:"多多",age:'5岁',parent:"黄磊",tel:"135****2007",address:"北京市"},
                {Name:"小糯米",age:'3岁',parent:"杨幂",tel:"135****2007",address:"北京市"},
                {Name:"奥利",age:'3岁',parent:"李小鹏",tel:"135****2007",address:"北京市"},
                {Name:"neinei",age:'3岁',parent:"吴尊",tel:"135****2007",address:"北京市"}
            ];
            var studentInform=[
                {Name:"安吉",age:'3岁',parent:"沙溢",tel:"135****2007",address:"北京市"},
                {Name:"Jasper",age:'3岁',parent:"陈小春",tel:"135****2007",address:"北京市"},
                {Name:"轩轩",age:'3岁',parent:"邹市明",tel:"135****2007",address:"北京市"},
                {Name:"奥利",age:'3岁',parent:"李小鹏",tel:"135****2007",address:"北京市"},
                {Name:"neinei",age:'3岁',parent:"吴尊",tel:"135****2007",address:"北京市"}
            ];
            var studentInforma=[
                {Name:"尼莫",age:'3岁',parent:"沙溢",tel:"135****2007",address:"北京市"},
                {Name:"Jasper",age:'3岁',parent:"陈小春",tel:"135****2007",address:"北京市"},
                {Name:"轩轩",age:'3岁',parent:"邹市明",tel:"135****2007",address:"北京市"},
                {Name:"奥利",age:'3岁',parent:"李小鹏",tel:"135****2007",address:"北京市"},
                {Name:"neinei",age:'3岁',parent:"吴尊",tel:"135****2007",address:"北京市"}
            ];
            var student=[];
            student.push(studentInf,studentInfo,studentInfor,studentInform,studentInforma)

            function check(num) {
                var mytable = $(".chakan .col-lg-12 tbody").get(0);
                mytable.innerHTML = "";
                for (var i = 0; i < student[num].length; i++) {    //
                    mytable.innerHTML += "<tr>" +
                        "<td>" + student[num][i].Name + "</td>" +
                        "<td>" + student[num][i].age + "</td>" +
                        "<td>" + student[num][i].parent + "</td>" +
                        "<td>" + student[num][i].tel + "</td>" +
                        "<td>" + student[num][i].address + "</td>" +
                        "</tr>"
                    console.log(student[num][i].Name)
                }
            }

            //查询功能
    var found=document.getElementsByClassName("search")[0];
    var input=found.getElementsByClassName("input")[0];
    var tbody=document.getElementsByTagName("tbody")[0];
    var tr=tbody.getElementsByTagName("tr");   //获取到每行
    var classes=tbody.getElementsByClassName("classCha");
    var classes1=tbody.getElementsByClassName("classCha1");
    var classes2=tbody.getElementsByClassName("classCha2");
    function search(){
        var arr=input.value;
        for(var i=0;i<classes.length;i++) {
               if(classes[i].innerText.indexOf(arr)!=-1||classes1[i].innerText.indexOf(arr)!=-1||classes2[i].innerText.indexOf(arr)!=-1)
                {
                    classes[i].parentNode.style.display="table-row";   //将显示出来的的内容不发生格式的改变显示
                }else{
                    classes[i].parentNode.style.display="none";
               }
            }
        }


</script>
</body>
</html>